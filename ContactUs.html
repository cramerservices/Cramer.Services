<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Book HVAC Tune-Up — $75</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{--bg:#f8f9fb;--card:#fff;--accent:#0d6efd;--text:#1b1f24;--muted:#6c757d;--ring:0 0 0 3px rgba(13,110,253,.25)}
  *{box-sizing:border-box} body{margin:0;font-family:Poppins,Arial,sans-serif;background:var(--bg);color:var(--text)}
  .wrap{max-width:720px;margin:2rem auto;padding:1rem}
  .card{background:var(--card);border:1px solid #dee2e6;border-radius:12px;padding:1rem 1.2rem}
  h1{margin:.2rem 0 1rem}
  form{display:grid;gap:.8rem;margin-top:1rem}
  input,textarea{width:100%;padding:.75rem;border:1px solid #ced4da;border-radius:6px}
  input:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:var(--ring)}
  .cta{display:inline-block;background:var(--accent);color:#fff;padding:.75rem 1rem;border-radius:8px;text-decoration:none;border:0;cursor:pointer;font-weight:600}
  .muted{color:var(--muted)} .row{display:grid;grid-template-columns:1fr 1fr;gap:.8rem}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Book HVAC Tune-Up <span class="muted">— $75 (on sale from $100)</span></h1>
      <p class="muted">Fill this out and we’ll reserve your tune-up. You’ll complete payment on the next page.</p>

      <form id="tuneForm" novalidate>
        <div class="row">
          <input name="name"  placeholder="Full Name" required>
          <input name="phone" placeholder="Phone" required>
        </div>
        <div class="row">
          <input name="email" type="email" placeholder="Email" required>
          <input name="date"  type="date"  placeholder="Preferred Date (optional)">
        </div>
        <input name="address" placeholder="Service Address (Street, City, State)" required>
        <textarea name="notes" rows="4" placeholder="System details / access notes (optional)"></textarea>

        <button class="cta" type="submit">Continue to Payment</button>
        <p id="msg" class="muted" aria-live="polite"></p>
      </form>
    </div>
    <p class="muted" style="margin:.8rem 0 0">You’ll be redirected to our secure payment page.</p>
  </div>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // === USE YOUR EXISTING KEYS (same as index.html) ===
    const EMAILJS_PUBLIC_KEY = 'TDIki3rqftcomcjJC';
    const EMAILJS_SERVICE_ID = 'service_ebrskb5';
    const EMAILJS_TEMPLATE_ID = 'template_b95xw46'; // set your template to expect fields below

    const STRIPE_PAYMENT_LINK = 'https://buy.stripe.com/REPLACE_WITH_YOUR_PAYMENT_LINK'; // <-- change this

    function show(text, err=false){
      const el = document.getElementById('msg');
      el.textContent = text;
      el.style.color = err ? '#dc3545' : '#6c757d';
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });

      const f = document.getElementById('tuneForm');
      f.addEventListener('submit', async (e)=>{
        e.preventDefault();

        const data = {
          subject: 'HVAC Tune-Up Booking — $75',
          name:   f.name.value.trim(),
          phone:  f.phone.value.trim(),
          email:  f.email.value.trim(),
          date:   f.date.value,
          address:f.address.value.trim(),
          notes:  f.notes.value.trim(),
          service:'HVAC Tune-Up ($75)',
          time:   new Date().toLocaleString()
        };

        if(!data.name || !data.phone || !data.email || !data.address){
          show('Please complete all required fields.', true); return;
        }

        const btn = f.querySelector('button[type="submit"]');
        const prev = btn.textContent; btn.disabled = true; btn.textContent = 'Submitting…'; show('');

        try{
          await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, data);
          // Go to payment page
          window.location.href = STRIPE_PAYMENT_LINK;
        }catch(err){
          console.error(err);
          show('Could not submit. Please try again or email cramerservicesllc@gmail.com', true);
        }finally{
          btn.disabled = false; btn.textContent = prev;
        }
      });
    });
  </script>
</body>
</html>
